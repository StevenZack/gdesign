# 实现
- [本地服务器客户端开发现状](#本地服务器客户端开发现状)
- [关于跨平台网络库](#关于跨平台网络库)
- [为什么选择Go语言](#为什么选择go语言)
- [Go语言的现状与前景](#go语言的现状与前景)
- [桌面GUI框架](#桌面gui框架)
- [Android开发现状](#android开发现状)
- [摄像头直播功能实现](#摄像头直播功能实现)
- [Robotgo自动化库](#robotgo自动化库)

---
## 本地服务器客户端开发现状

## 关于跨平台网络库

## 为什么选择Go语言



Go语言介绍：

    Go语言是谷歌开发的一款全新的编程语言，可以在不损失应用程序性能的同事，大大降低代码的复杂度。
    他的宗旨是让开发者更加容易地开发出简单，稳定，高效的软件！

为什么选择Go语言？
- 1.性能(并发)
- 2.跨平台
- 3.网络库丰富
- 4.语法简单

__1.性能(并发)__

Go语言针对多处理器系统应用程序专门进行了优化，在使用了Go编译之后，程序可以媲美C或C++代码的速度，而且更加安全，而且还支持并行进程。

编译之后的Go语言代码的运行速度和C语言非常接近，而且编译速度非常快，就好像在使用一个动态的交互式编程语言一样。

目前，现有的各大流行的编程语言都没有对多核处理器进行专门的优化。而Go语言就是为了解决这一问题而诞生的。

__并发编程__[2]

时至今日，并发编程已经成为了程序员的基本技能了，在各大技术社区都可以看到诸多与之相关的讨论主题。到底那种方式是最佳的并发编程体验？或许会一直争论下去。但是Go语言却一反常态，从底层就将一切都并发化了！运行时使用了Goroutine运行所有的一切，当然也包括main.main入口函数。

可以说，Goroutine已经成为了Go语言的标志性特征了。他使用类协程的方式来灵活地处理并发单元，同时却又在运行时层面做了更加深度的优化处理。这样，使得Go语言在语法上的并发编程变得极为简单！无需处理回调，无需关注执行时的切换，一切仅仅需要一个go关键字，简单而又自然！

搭配Go语言的channel，可以让新手也能轻松实现CSP并发模型。将并发单元间的数据耦合拆解开来，各司其职。这对所有纠结于内存共享、锁粒度的开发人员来说都是一个可以期盼的大解脱！如果真的要说有什么不足，那就应该是要有一个更大的计划，将通信从进程内拓展到进程之外，实现真正意义上的分布式！

Goroutine和Channel使得编写高并发的服务器软件变得相当容易，很多情况下完全不需要考虑锁的机制和由此带来的一切问题。比如，单个的Go应用也能有效的利用多个CPU核心，并且执行的性能特别好。这个和Python相比有天壤之别！多线程的Python程序其实并不能有效地利用多核的优势，只能用多进程的方式来部署。如果使用标准库里面的multiprocessing包又会对监控和管理造成很多不必要的挑战。所以，部署一个python语言的时候，通常是每个CPU核心来部署一个应用，这样就会造成很多不必要的资源浪费。比如说假设某个Python应用启动之后需要占用100MB内存，而服务器有32个CPU核心，那么留下一个核心给系统，而运行31个应用副本需要浪费3GB的内存资源，太糟糕了！

__良好的语言设计__

这也是我个人非常喜欢Go的很大的一个原因。虽然，从学术的角度来讲，Go语言是十分平庸的，不支持许多高级语言的特性。但是，从工程学的角度来讲，Go语言的设计是十分优秀的！规范足够灵活，有其他语言基础的程序员都可以通过快速学习来上手。更加重要的是Go语言自带的完善的工具链，大大提高了团队协作的一致性。比如gofmt自动对Go语言的代码排版，很大程度上杜绝了不同的人写的代码排版风格不一样的问题。吧编辑器配置成在编辑存档的时候自动运行gofmt，这样在编写代码的时候可以随意摆放位置，当你保存的时候自动变成正确的排版代码。是不是很方便！此外还有gofix,govet等非常有用的工具。


## Go语言的现状与前景

其实我在做出这个选择之前已经花了大量时间做过详尽调研。 国外如Google、AWS、Cloudflare、CoreOS等，国内如七牛、阿里等都已经开始大规模使用Golang开发其云计算相关产品。 跟着世界级巨人的脚步应该不至于走错方向，而且在学习Golang的过程中，我也渐渐被其背后的设计哲学所折服。

另外，云风博客中曾说过这样一句话：

	我发现我花了四年时间锤炼自己用C 语言构建系统的能力，试图找到一个规范，可以更好的编写软件。结果发现只是对 Go 的模仿。缺乏语言层面的支持，只能是一个拙劣的模仿。

## 桌面GUI框架

因为本系统需要做到跨平台，所以在系统实现的时候需要寻找合适的桌面GUI库。

桌面GUI开发有很多选择，主要分为跨平台的GUI框架和非跨平台的GUI框架。其中我们重点关注跨平台的GUI框架。

- Qt。比较知名的跨平台框架，但是因为导出的安装包体积太大，所以放弃。
- Sciter。非常轻量级的GUI框架，使用HTML来写界面，导出的安装包体积也小。
- UI。来自github上的一个第三方GUI框架，跨平台，原生支持，Go语言。唯一的缺点是GUI组件太少。

综合考虑之后，最终选择了Sciter框架。

## Android开发现状

一开始在实现的时候就是在Android平台实现的，等到用户量多了起来的时候，才开始扩展到其他平台。
目前Android应用程序开发的现状就是本地化要求比较高的App就使用Native开发，也就是用Java来开发；那些以内容为主的，对本地功能要求不高的，完全可以用网页替代的App（如：百度贴吧，微博等），就是用一些Web技术来开发，也就是用HTML,CSS和JavaScript来开发。对于本系统而言，JavaScript的功能自然是不足以满足我们的要求的啦，所以肯定是Native方式。但是依然存在一个问题。

因为我们是需要在本地建立一个HTTP服务器的，由于HTTP服务器本身结构复杂，Java标准库里面又没有已经实现好的HTTP服务器，所以，HTTP服务器底层实现部分我选择了使用Go语言来编写。

Go语言官方团队构建了一个GoMobile库，这个库是可以帮助你将Go语言的代码运行在Android上面的。虽然不能用Go语言来写Android的UI，但是可以将Go语言代码以第三方库的形式嵌入到你的Android项目里面，然后使用Java来调用。有了这个库，我们就可以把让Go语言来写我们的HTTP服务器变成现实啦！因为Go语言本身就是为了写服务器而生的。所以使用Go语言写起来会非常顺手。

## 摄像头直播功能实现

摄像头直播功能主要是参考了网上的一个第三方摄像头直播示例代码，然后有了灵感。

为什么在Web端实现？

整个摄像头直播功能主要是在Web端实现的，也就是说需要借助浏览器来调用系统的摄像头接口。这和大家以往想象的摄像头直播软件不同。之所以这么实现，一个是因为Go语言本身就有很多这种类型的例子；其二是因为在Web端实现的话，另一台设备不需要安装客户端了，只要有一个浏览器即可实现直播者或者观看者的角色。我觉得这样会方便很多。

首先直播者在Web端点击一个按钮，JavaScript便通过WebSocket连接到HTTP服务器，然后用JavaScript通过HTML5的摄像头API————navigator.getUserMedia()函数，来申请摄像头画面数据。拿到摄像头画面数据之后呢，把这些数据通过刚才连接上的WebSocket发送给服务器，服务器收到数据之后，则对所有的WebSocket连接进行广播。至于观看者这边，同样，也是用WebSocket与服务器进行连接，然后监听数据。如果服务器发送数据过来了，观看者这边再用JavaScript把画面显示在HTML中的Img标签里面即可。

## Robotgo自动化库

为了实现键盘和鼠标的控制，我们找到了一个第三方库：https://github.com/go-vgo/robotgo

这个第三方库实现了跨平台的键盘鼠标输入控制，也就是说，可以在Go语言代码里面控制键盘和鼠标的输入。比如执行指令"enter"，就相当于按了键盘上的回车按键。另外一个，关于组合按键，他是这样解决的。例如：输入"control alt t"这样的命令，以空格来隔开，就可以实现组合按键的功能。

本系统在实现的时候也是原封不动的使用了该第三方库的指令系统，在控制端输入指令之后，通过HTTP协议发送给受控端，然后受控端执行指令即可。